# Project 602 Demo

本说明最后更新于： 2024-10-14 03:20

## 简介

这是一个根据干宝 [BV1Ab1iYfEmB](https://www.bilibili.com/video/BV1Ab1iYfEmB/) 的视频内容开发的小型游戏demo。\
由于时间问题和个人精力问题，仅实现了部分功能，主要目的是进行可行性验证和扩展方向的探索。\
由于本人并非专业游戏开发人员，数值策划方面尤其不懂，所以本项目存在若干不合理的地方，还请谅解。\
游戏界面当前尺寸为2100x1000，没做适配，可能在不同分辨率下显示效果不佳，如果无法完全显示界面请尝试按住 `Ctrl` 滚动鼠标滚轮调整缩放比例。

## 一些需要首先说明的问题

- 感觉元素效果不合理，武器的攻击逻辑也比较奇怪，这是为什么？
> 因为时间限制，一些效果暂时没法实现，只能用一些别的效果来替代，例如：\
> 冰冻实际上应该禁止怪物攻击或者减缓攻速，但是本项目并没有制作怪物攻击的逻辑，所以只能用随机造成伤害来代替。\
> 最开始设想矛类武器应当优先攻击攻击力最高的怪物，但是怪物都不会攻击，所以只能改为攻击血量最高的怪物。

- 这个项目可以拓展为一个完整的游戏吗？
> <span style="color: red;">**不可以**</span>，游戏开发最好借助一些成熟的游戏引擎，比如说 [GODOT](https://godotengine.org/)， [Unity](https://unity.com/)，[Cocos](https://www.cocos.com/) 之类。\
> 本项目只是为了快速验证一些想法而开发的，本身基于浏览器原生API开发，功能上能实现的有限，性能方面也和原生应用差距非常大。一旦涉及到复杂的游戏逻辑，性能和功能上都会有很大的问题。\
> 正如简介所述，本项目只是一个小型demo，主要目的是进行可行性验证和扩展方向的探索。

- 具体简略了哪些功能？为什么不得不简略？
> 1. 游戏战斗场景部分，由于仅使用浏览器原生API，碰撞检测等等功能难以实现，所以简略了这部分内容，在实际开发的时候可以借助现成的游戏引擎来实现。当前仅将战斗界面简单分割为4x5的格子，在随机位置生成怪物进行战斗。怪物的攻击能力也是非核心功能，所以没有实现，游戏失败的条件仅为：所有地图格子都被怪物占据无法添加新的怪物。
> 2. 游戏结算和重开部分，时间问题没有实现，目前只有开始和暂停功能，重开请刷新页面。
> 3. 设计上本游戏的装备分为武器、物品和防具，时间问题只实现了武器部分，物品和防具部分没有实现。此部分详细内容请参考： ***对于本游戏demo的说明-装备的生成逻辑*** 部分。

- 更改了哪些内容？
> 1. 主界面下方的人物属性面板，考虑到当前游戏的机制核心实际上是通过汉字组合生成的武器，很难说如何去生成一个总和的统计属性面板，所以这个面板当前作为游戏信息日志面板，用于记录攻击死亡等等信息。
> 2. 添加了最右侧的武器列表面板，所有从汉字表中检测到的武器都会显示在这里，将鼠标悬浮到对应的武器上可以查看组成武器的汉字与对应格子。

## 对于这个策划案我的一些看法

### 需要明确装备的生成逻辑

当前策划案中对于装备的生成逻辑在我看来有一些过于模糊，或者说不够详细。

其实策划案中的生成逻辑更近似于自然语言，基于自然语言则很难去实现一个可行的算法，除非接入大语言模型（例如chatGPT），但是这样的话又会引入很多其他问题，大语言模型的输出稳定性不好说，成本更是没法解决。

所以我认为如果要实际去做这么一个游戏，装备的生成逻辑应该基于一些特定的规则和前提，在本游戏中使用的规则和前提如下：

1. 装备有三种类型：武器、物品、防具。
> 武器：会根据自身攻击间隔属性进行主动攻击。\
> 物品：会根据实际生成的结果分为主动攻击物品（和武器一样根据攻击间隔进行主动攻击），被动物品（给玩家角色添加一些附属效果）和附属物品（例如“箭”与“弓”，与武器组合添加额外效果）。\
> 防具：会根据自身防御属性进行被动防御。

2. 装备的生成逻辑：
> 关于此部分请参考：***对于本游戏demo的说明-装备的生成逻辑*** 部分。


### 需要考虑的问题

1. 如何标识已经组合成装备的汉字？如何标识某个汉字可以与场上的汉字组合？
> 我在调试demo的时候意识到两个问题：
> 1. 因为存在同一个汉字可能归属于多个装备的情况，玩家实际上比较难判断究竟哪些汉字组合成了一个装备。
> 2. 也比较难判断手上的汉字究竟可以和场上的哪些汉字组合。
> 
> 我思考了一下，但是没有想到很好的解决方案，当前只有 “鼠标悬浮于装备列表中的装备时会高亮组合成装备时使用的汉字” 和 “已经组成装备的汉字会高亮” 这两个机制作为给玩家的提示。

2. 是否要添加多文字的语素？
> 一个比较容易想到的例子是 `葫芦`，这是一个特定的名词，但是它的组成部分是 `葫` 和 `芦`，玩家拿到这两个字的任意一个字都不太可能去组合成别的装备，只能把他组合成 `葫芦` 才会产生效果，如果抽不到另一个字那就会很尴尬，而且多文字语素也会导致一些叠放的玩法成本变高。（关于叠放玩法请参考： ***对于本游戏demo的说明-叠放***)）\
> 当前我的想法是可以把 `葫芦` 这个多文字的语素替换成 `壶` 这个单字，然后可以匹配为 `火壶` 变成投掷攻击装备， 也可以匹配为 `药壶` 进行回复生命值。

3. 就当前的游戏机制来说可能是不太够的，是否需要添加其他的子系统？
> 目前来说其实游戏还是比较偏单调的，唯一的核心就是汉字组合生成装备，我认为作为一个游戏的体量来说玩法可能不太够，可能需要添加一些其他的子系统，例如：\
> 想要组成build的话，还需要一些其他的子系统帮助玩家抽到更想要的文字。（商店或者随机事件）\
> 是否可以有一些被动道具对生成的装备进行强化？（例如杀戮尖塔的遗物系统）\
> 是否可以在文字上做一些特别的处理？（例如文字的堆叠合成、升级或者分解等等）\
> 也许可以用文字合成一些一次性道具？

4. 汉字的刷新逻辑，是否要区分不同的汉字？
> 完全随机取字的情况下，如果组合词过多，那么很容易出现玩家手里有一大把形容字词，但是却抽不到基础名词的情况，是否要区分不同的汉字加权，控制他们出现的概率？\
> 或者将汉字分类，让不同类型的汉字出现的概率相同，只在同类型汉字内平均分配概率？（例如：30%概率出现基础名词，如`刀`，40%概率出现形容词，如`长`，30%概率出现扩展名词，如 `青龙`）

## 对于本游戏demo的说明

### 等级系统

玩家杀怪获得经验值，经验值达到一定数值后升级，升级后获得一个随机汉字，随机汉字会放置在汉字临时存储区中，如果暂存区已满则会等待玩家使用汉字临时存储区的汉字之后再添加。\
等待进入暂存区的汉字数量会显示在汉字临时存储区名字右边。

### 武器的攻击模式

- 剑/刀 对随机敌人进行单体攻击
- 棍/杖 选取随机敌人进行3x3范围攻击
- 弓 优先攻击血量最少的敌人
- 矛枪戟 优先攻击血量最高的敌人
- 斧 优先攻击血量最高的敌人，并造成十字范围伤害


### 形容字与形容词
1. 本游戏存在数个单字形容字，例如 `锐`，`长`，`火` 等等，可以与装备自由组合，例如：`锐刀`，`长刀`，`火刀` 等等。
2. 本游戏也存在数个多字形容词，例如 `锐利` ，单字形容词进行适当排列可以组合为多字形容词，多字形容词往往比单字形容字带来的效果更强，例如：
> `锐利刀` 将会判定为 `锐利` + `刀`，最终将获得一把攻击力x1.6的 `刀`\
> `利锐刀` 将会判定为 `利` + `锐` + `刀`，最终将获得一把攻击力x1.1x1.1=x1.21的 `刀`


### 装备的生成逻辑

1. 本游戏存在数个基础装备和其上位装备的文字组合，例如：`刀`-`偃月刀`-`青龙偃月刀`
2. 在连续的装备关键字之间可以插入任意的修饰性文字，例如： `偃月火刀` 和 `火偃月刀` 都是合法的装备。
> `火青龙偃月刀` 和 `青龙火偃月刀` 和 `青龙偃月火刀` 的效果是一样的。\
> 但是例如 `青火龙偃月刀` 和 `青龙偃火月刀` 则不是合法的装备。\
> 具体来讲，对于 `青龙偃月刀` 来说，合法的匹配规则为：\
> `<任意数量的修饰词>` 青龙 `<任意数量的修饰词>` 偃月 `<任意数量的修饰词>` 刀

### 叠放

本游戏的文字可以同时出现在多个装备中重复计数，以下是几个例子：
```text
刀长
长刀
```
这个例子将会匹配到4个 `长刀` 装备，分别是：
1. 左上角的 `刀` 向右匹配到的 `长刀`
2. 左上角的 `长` 向下匹配到的 `长刀`
3. 右下角的 `刀` 向左匹配到的 `长刀`
4. 右下角的 `长` 向上匹配到的 `长刀`

```text
口口刀口
口锐利刀
刀利锐口
口刀口口
```
*此处 `口` 代表空格

这个例子将会匹配到4个 `锐利刀` 装备，分别是：
1. 第一行的 `刀` 向下匹配到的 `锐利刀`
2. 第二行的 `刀` 向左匹配到的 `锐利刀`
3. 第三行的 `刀` 向右匹配到的 `锐利刀`
4. 第四行的 `刀` 向上匹配到的 `锐利刀`

### 属性的运作方式
属性相关的积累值到达上限之后触发对应的属性特效
> 流血会一次性减少怪物当前血量的30%\
> 点燃会在十字范围内造成10%怪物血量上限的伤害\
> 冰冻会随机造成怪物怪物血量的0%~100%的伤害
 
### 汉字回收机制

1. 回收站有5个待选汉字，选取汉字需要花费5个回收点数
2. 可以点击最下方的按钮花费一个回收点数刷新回收站的待选库
3. 可以把不需要的汉字拖拽到回收站进行回收，每回收1个汉字会获得1个回收点数

### 失败条件

地图格子被怪物占满，无法再添加新的怪物

### 本项目当前的武器和形容词库相关表格
请参考以下链接，不需要编程相关知识，只要稍有英语基础都能看懂：
- [所有相关表格目录](https://github.com/HatanoKawa/project-602/tree/master/src/db/tables)
- [武器表](https://github.com/HatanoKawa/project-602/blob/master/src/db/tables/table-weapon.ts)
- [形容词表](https://github.com/HatanoKawa/project-602/blob/master/src/db/tables/table-modifier.ts)
- [敌人表](https://github.com/HatanoKawa/project-602/blob/master/src/db/tables/table-enemy.ts)

以下表格目前没有内容，仅作为占位：
- [物品表](https://github.com/HatanoKawa/project-602/blob/master/src/db/tables/table-item.ts)
- [防具表](https://github.com/HatanoKawa/project-602/blob/master/src/db/tables/table-armor.ts)


